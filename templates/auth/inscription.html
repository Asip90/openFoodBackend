{% extends 'auth/base.html' %}
{% load static %}

{% block title %}Inscription - WAPay{% endblock %}

{% block content %}
<section class="min-h-screen flex flex-col md:flex-row relative">

  <!-- Image gauche -->
  <div class="md:w-1/2 hidden md:flex items-center justify-center bg-blue-100">
    <img src="{% static 'img/signup-hero.png' %}" alt="Inscription WAPay" class="w-3/4 h-auto object-contain">
  </div>

  <!-- Formulaire droite -->
  <div class="md:w-1/2 flex items-center justify-center p-6 md:p-12 bg-white">
    <div class="w-full max-w-md text-center">

      <!-- Logo et texte -->
      <img src="{% static 'img/logo.png' %}" alt="Logo PAYO" class="h-16 w-auto mx-auto mb-4">
      <h3 class="text-2xl font-inter font-bold text-gray-700 mb-2">Bienvenue !</h3>
      <h4 class="text-3xl font-poppins font-semibold text-primary mb-6">Créer un compte</h4>

      <form method="post" class="space-y-4 text-left">
        {% csrf_token %}

        <div class="flex gap-4">
          <div class="w-1/2">
            <label class="block text-gray-700 mb-2">Prénom</label>
            <input type="text" name="first_name" placeholder="Votre prénom"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
          </div>

          <div class="w-1/2">
            <label class="block text-gray-700 mb-2">Nom</label>
            <input type="text" name="last_name" placeholder="Votre nom"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
          </div>
        </div>

        <div>
          <label class="block text-gray-700 mb-2">Email</label>
          <input type="email" name="email" placeholder="Entrez votre email"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
        </div>

        <div>
          <label class="block text-gray-700 mb-2">Mot de passe</label>
          <input type="password" name="password" placeholder="Entrez votre mot de passe"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
        </div>

        <button type="submit"
                class="w-full py-3 bg-primary text-white font-semibold rounded-lg hover:bg-secondary transition">
          Créer le compte
        </button>
      </form>

      <p class="text-center mt-6 text-gray-600">
        Déjà un compte ? 
        <a href="{% url 'connexion' %}" class="text-primary font-semibold hover:text-secondary">Se connecter</a>
      </p>
    </div>
  </div>

  <!-- Toast Messages -->
  <div class="fixed top-5 right-5 space-y-3 z-50">
    {% if messages %}
        {% for message in messages %}
            {% if message.tags == "success" %}
                <div class="px-4 py-3 rounded-lg bg-green-500 text-white shadow-md">
                    {{ message }}
                </div>
            {% elif message.tags == "error" or message.tags == "danger" %}
                <div class="px-4 py-3 rounded-lg bg-red-500 text-white shadow-md">
                    {{ message }}
                </div>
            {% elif message.tags == "warning" %}
                <div class="px-4 py-3 rounded-lg bg-yellow-400 text-gray-900 shadow-md">
                    {{ message }}
                </div>
            {% else %}
                <div class="px-4 py-3 rounded-lg bg-blue-500 text-white shadow-md">
                    {{ message }}
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
  </div>

</section>

<!-- Auto-dismiss toast après 5 secondes -->
<script>
  setTimeout(() => {
    const toasts = document.querySelectorAll('.fixed.top-5 div');
    toasts.forEach(t => t.remove());
  }, 5000);
</script>

{% endblock %}
